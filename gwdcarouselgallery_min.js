(function(){"use strict";var h=function(a){return"gwd-page"==a.tagName.toLowerCase()||"gwd-page"==a.getAttribute("is")},k=function(a){if(h(a))return a;for(;a&&9!=a.nodeType;)if((a=a.parentElement)&&h(a))return a;return null},l=function(a,b,c){a=parseInt(a.getAttribute(b),10);isNaN(a)&&(a=c);return a},m=function(a,b,c,d){d=d||b;a.hasAttribute(b)?(a=a.getAttribute(b),c.setAttribute(d,a)):c.removeAttribute(d)};var n=["-ms-","-moz-","-webkit-",""],p=function(a,b,c,d){for(var e,g,f=0;f<n.length;++f)e=n[f]+b,g=(d?n[f]:"")+c,a.style.setProperty(e,g)};var q=function(a,b,c){var d;c?(d=document.createEvent("CustomEvent"),d.initCustomEvent(a,!0,!0,c)):(d=document.createEvent("Event"),d.initEvent(a,!0,!0));b.dispatchEvent(d);return d},r=function(a,b){var c=function(d){a.removeEventListener("attached",c);b(d)};a.addEventListener("attached",c)};var t=function(a){a=a.trim();return window.Enabler?Enabler.getUrl(a):a};var u=function(a){var b=document.createElement("img","gwd-image");b.setAttribute("source",a);return b},v=function(a){var b=[];if(a){a=a.split(",");for(var c=0;c<a.length;++c)b.push(u(t(a[c])))}return b},x=function(a,b){for(var c=document.createElement("div","gwd-page"),d,e=0;e<a.length;++e)d=a[e],p(d,"user-select","none"),d.classList.add("frame"),b&&b(d),c.appendChild(d);r(c,c.gwdLoad.bind(c));return c},y=function(a,b){for(var c=b.length,d=b.splice(0,c),e,g=0;g<c;g++)e=d[g],"frameshown"==e?q(e,a,
{id:a.currentIndex}):q(e,a)},z=function(a,b){return(a%b+b)%b};var A=function(a){return{autoplay:a.hasAttribute("autoplay"),p:l(a,"frame-width",160),G:l(a,"frame-height",80),I:l(a,"neighbor-rotation-y",38),J:l(a,"neighbor-translation-x",20),K:l(a,"neighbor-translation-y",-8),L:l(a,"neighbor-translation-z",-80),transitionDuration:l(a,"transition-duration",600),H:a.hasAttribute("show-reflection"),F:l(a,"start-frame",2)}},B=function(a,b,c,d){var e=0;a=x(a,function(a){a.style.left=e+"px";a.style.width=b+"px";a.style.height=c+"px";e+=b});a.className="container"+(d?
" reflection":"");return a},C=function(a,b,c,d,e){b="translate3d("+b+"px, "+c+"px, "+d+"px)";e&&(b="rotate3d(0, 1, 0, "+e+"deg) "+b);p(a,"transform",b)},D=function(a,b){p(a,"transition","transform "+b+"ms",!0)};var E=function(a,b){return setInterval(a,b)};document.registerElement&&document.registerElement("gwd-carouselgallery",{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:function(){this.m=!1;this.g=null;this.a=0;this.q=this.b=-1;this.l=0;this.e=[];var a=document.createElement("gwd-gesture");a.className="gesture";this.f=a;this.w=this.onTrackStart_.bind(this);this.v=this.onTrack_.bind(this);this.u=this.onTrackEnd_.bind(this);this.t=this.onTap_.bind(this);this.n=q.bind(null,"firstinteraction",this);this.s=this.onFramesLoad_.bind(this);
this.A=!1;this.o=[];this.h=y.bind(null,this,this.o);this.k=[];this.D=1;this.r=0;this.B=this.hasAttribute("images");this.c=A(this);this.C=this.j=0;this.d=this.i=null},enumerable:!0},attachedCallback:{value:function(){this.j=this.j||this.clientWidth/2;this.f.addEventListener("trackstart",this.w,!1);this.f.addEventListener("track",this.v,!1);this.f.addEventListener("trackend",this.u,!1);this.f.addEventListener("tap",this.t,!1);this.addEventListener("transitionend",this.h,!1);this.addEventListener("webkitTransitionEnd",
this.h,!1);if("function"==typeof this.gwdLoad){var a=k(this),b="function"==typeof this.gwdIsLoaded,c=a&&"function"==typeof a.gwdIsLoaded;if(!a||c&&a.gwdIsLoaded())b&&this.gwdIsLoaded()||this.gwdLoad()}},enumerable:!0},detachedCallback:{value:function(){this.f.removeEventListener("trackstart",this.w,!1);this.f.removeEventListener("track",this.v,!1);this.f.removeEventListener("trackend",this.u,!1);this.f.removeEventListener("tap",this.t,!1);this.removeEventListener("transitionend",this.h);this.removeEventListener("webkitTransitionEnd",
this.h)},enumerable:!0},currentIndex:{enumerable:!0,get:function(){return this.a?this.b+1:void 0}},goToFrame:{value:function(a,b){var c="none"!=b,d=this.c.transitionDuration;0<a&&a<=this.a&&(this.stopRotation_(),this.setTransition_(c?d:0),this.centerFrame_(a-1))},enumerable:!0},goBackwards:{value:function(a){this.goToFrame(this.currentIndex-1,a||"slide")},enumerable:!0},goForwards:{value:function(a){this.goToFrame(this.currentIndex+1,a||"slide")},enumerable:!0},rotateOnce:{value:function(a,b){var c=
a||this.c.transitionDuration*this.a,d=b||"forwards",e=this.c.transitionDuration;this.a&&!this.i&&(this.C=this.b,this.setTransition_(e),this.updateFrames_(z(this.b+("left"==d||"backwards"==d?-1:1),this.a),0),this.i=E(function(){this.updateFrames_(z(this.b+("left"==d||"backwards"==d?-1:1),this.a),0);this.C==this.b&&this.stopRotation_()}.bind(this),c/this.a))},enumerable:!0},stopRotation_:{value:function(){this.i&&(clearInterval(this.i),this.i=null)},enumerable:!1},gwdIsLoaded:{value:function(){return this.m},
enumerable:!0},gwdLoad:{value:function(){if(!this.m&&!this.g){var a;if(this.B)a=v(this.getAttribute("images"));else{a=this.childNodes;for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];e.nodeType==Node.ELEMENT_NODE&&b.push(e)}a=b}this.e=a;this.loadFrames_()}},enumerable:!0},getFrame:{value:function(a){return this.e&&this.e[a-1]},enumerable:!0},loadFrames_:{value:function(){for(;this.firstChild;)this.removeChild(this.firstChild);this.d=null;this.g&&this.g.removeEventListener("pageload",this.s,!1);var a=
this.c;this.g=a=B(this.e,a.p,a.G,a.H);a.addEventListener("pageload",this.s,!1);this.appendChild(a);this.appendChild(this.f)},enumerable:!1},onFramesLoad_:{value:function(a){if(this.g===a.target){this.m=!0;this.a=this.e.length;this.k=[];if(this.r=this.a){a=this.c.F-1;if(0>a||a>=this.a)a=0;this.setTransition_(0);this.centerFrame_(a);this.c.autoplay&&setTimeout(this.rotateOnce.bind(this),0)}this.updateNavigationElement_();q("allframesloaded",this);q("ready",this)}},enumerable:!1},attributeChangedCallback:{value:function(a){switch(a){case "images":this.B=
!0;this.a=0;this.b=-1;this.e=v(this.getAttribute(a));this.loadFrames_();break;case "has-navigation":case "navigation-highlight":case "navigation-thumbnails":this.updateNavigationElement_();break;case "style":case "class":break;default:this.c=A(this)}},enumerable:!0},onTrackStart_:{value:function(){this.a&&(this.stopRotation_(),this.l=this.b,this.setTransition_(0))},enumerable:!1},onTrack_:{value:function(a){if(this.a){this.n&&(this.n(),this.n=null);a=-a.dx/this.c.p;var b=Math.round(a);this.updateFrames_(this.l+
b,a-b)}},enumerable:!1},onTrackEnd_:{value:function(){if(this.a){this.setTransition_(this.c.transitionDuration);var a=this.b;this.centerFrame_(a);this.l!=a&&(0==a?q("reachleftend",this):a==this.a-1&&q("reachrightend",this))}},enumerable:!1},onTap_:{value:function(){this.a&&q("frametap",this,{id:this.currentIndex})},enumerable:!1},setTransition_:{value:function(a){this.A=0<a;this.g&&D(this.g,a);for(var b=0;b<this.a;++b)D(this.e[b],a)},enumerable:!1},centerFrame_:{value:function(a){this.e[a]&&(this.b=
a,this.updateFrames_(a,0,this.a),this.o.push("frameshown"),this.k[a]||(this.k[a]=!0,--this.r||this.o.push("allframesviewed")));this.A||this.h()},enumerable:!1},updateFrames_:{value:function(a,b,c){for(var d=this.c,e,g=c||1,f=-g;f<=g;++f)if((c=this.e[f+a])&&0<=b*f){0>f?e=1-Math.abs(b):0<f?e=Math.abs(b)-1:(this.b=a,e=b);var w=Math.abs(e);C(c,d.J*e,d.K*w,d.L*w,d.I*e)}this.q!=this.b&&(this.q=this.b,q("frameactivated",this,{id:this.currentIndex}));C(this.g,this.j-(a+b+.5)*d.p,0,0)},enumerable:!1},updateNavigationElement_:{value:function(){var a=
this.hasAttribute("has-navigation"),b=!!this.d;a&&!b?(a=this.id||this.getAttribute("data-gwd-grp-id"),this.d=document.createElement("gwd-gallerynavigation"),this.d.setAttribute("for",a),this.classList.add("has-navigation"),this.appendChild(this.d)):!a&&b&&(this.classList.remove("has-navigation"),this.removeChild(this.d),this.d=null);this.d&&(m(this,"navigation-highlight",this.d,"highlight"),m(this,"navigation-thumbnails",this.d,"use-thumbnails"))}},frameSnapInterval:{get:function(){return this.D}},
frameCount:{get:function(){return this.a}}})});})()
